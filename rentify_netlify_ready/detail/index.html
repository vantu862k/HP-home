<!doctype html><html lang="vi"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Chi tiết | Rentify</title><meta name="description" content="Chi tiết bất động sản cho thuê — hình ảnh, giá, địa chỉ.">
<link rel="stylesheet" href="../styles.css"></head><body>
<header class="header header--sticky"><div class="container header__row">
  <a class="logo" href="../index.html" style="text-decoration:none;color:inherit">
    <img src="../assets/logo.png" alt="Logo"><span id="siteNameDetail" class="brand-accent">Rentify</span>
  </a>
  <div class="header__actions"><a class="btn outline small" href="#">Đăng nhập</a></div>
</div></header>
<main class="container"><nav class="breadcrumbs"><a href="../index.html">Trang chủ</a> / <span id="bc_title">Chi tiết</span></nav>
<section class="detail"><div>
  <div class="gallery"><img id="mainImg" class="gallery__main" alt="Ảnh chính"><div class="gallery__thumbs" id="thumbs"></div></div>
  <h1 id="d_title" style="margin:16px 0 6px 0"></h1>
  <div id="d_addr" class="muted"></div><p id="d_desc" style="margin-top:12px"></p>
</div><aside class="aside"><div class="price" id="d_price"></div><div class="addr" id="d_addr2"></div></aside></section></main>
<script>
let CONFIG = {};
async function loadConfig(){ try { const res = await fetch('../data/config.json', {cache:'no-store'}); CONFIG = await res.json(); } catch(e){ CONFIG = {}; }
  try { document.getElementById('siteNameDetail').textContent = CONFIG.siteName || 'Rentify' } catch(e){} }
function absolutize(src){ try{ if(/^https?:\/\//i.test(src)) return src; const base = (CONFIG.imagesBase || '').replace(/\/+$/,''); const clean = String(src).replace(/^assets\/images\/?/,''); return base ? base + '/' + clean : src; }catch(e){ return src } }
async function loadDetail(){ const params = new URLSearchParams(location.search); const id = params.get('id'); let list = [];
  try{ const res = await fetch('../data/listings.json', {cache:'no-store'}); list = await res.json(); }catch(e){ list = []; }
  let l = (list||[]).find(x=>x.id===id) || (list||[])[0];
  if(!l){ l = {title:'Căn hộ tham chiếu', price:10000000, address:'Bến Nghé, Quận 1, TP.HCM', description:'Mẫu dữ liệu hiển thị khi mở trực tiếp.', images:[{src:'../assets/logo.png', room:'Phòng khách'},{src:'../assets/logo.png', room:'Phòng ngủ'},{src:'../assets/logo.png', room:'Bếp'}]}; }
  document.getElementById('bc_title').textContent = l.title; document.getElementById('d_title').textContent = l.title;
  document.getElementById('d_price').textContent = Number(l.price).toLocaleString('vi-VN') + ' đ/tháng'; const addr = l.address || ''; document.getElementById('d_addr').textContent = addr; document.getElementById('d_addr2').textContent = addr; document.getElementById('d_desc').textContent = l.description || '';
  document.getElementById('mainImg').src = absolutize((l.images||[])[0]?.src);
  const thumbs = document.getElementById('thumbs'); thumbs.innerHTML = (l.images||[]).map(im => ('<figure class="thumb"><img src="'+absolutize(im.src)+'" alt="'+(im.room||'')+'" onclick="swap(\''+absolutize(im.src)+'\')" loading="lazy" decoding="async"><figcaption><strong>'+(im.room||'')+'</strong></figcaption></figure>')).join('');
  window.swap = function(src){ document.getElementById('mainImg').src = src; };
}
(async function init(){ await loadConfig(); await loadDetail(); })();
</script></body></html>